@model SAM.ViewModels.OperationalData.GWMonitViewModel
@using Microsoft.AspNetCore.Identity
@using SAM.Domain.Entities
@inject UserManager<ApplicationUser> UserManager
@{
    ViewData["Title"] = "Groundwater Monitoring Details";
    var user = await UserManager.GetUserAsync(User);
    var canEdit = user != null && (await UserManager.IsInRoleAsync(user, "admin") || await UserManager.IsInRoleAsync(user, "company_admin") || await UserManager.IsInRoleAsync(user, "technician"));
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <p class="text-muted mb-0">View detailed information for groundwater monitoring record</p>
    </div>
    <div>
        @if (canEdit)
        {
            <a asp-action="GWMonitEdit" asp-route-id="@Model.Id" class="btn btn-primary">
                <i class="bi bi-pencil"></i> Edit
            </a>
        }
        <a asp-action="GWMonits" asp-route-companyId="@Model.CompanyId" asp-route-facilityId="@Model.FacilityId" asp-route-monitoringWellId="@Model.MonitoringWellId" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back to List
        </a>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Basic Information</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Sample Date:</dt>
            <dd class="col-sm-9">@Model.SampleDate.ToString("MM/dd/yyyy")</dd>

            <dt class="col-sm-3">Facility:</dt>
            <dd class="col-sm-9">@Model.FacilityName</dd>

            <dt class="col-sm-3">Monitoring Well:</dt>
            <dd class="col-sm-9">@Model.MonitoringWellName</dd>

            <dt class="col-sm-3">Company:</dt>
            <dd class="col-sm-9">@Model.CompanyName</dd>
        </dl>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5 class="mb-0">Sample Information</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Sample Depth:</dt>
            <dd class="col-sm-9">@(Model.SampleDepth?.ToString("F2") ?? "N/A") feet</dd>

            <dt class="col-sm-3">Water Level:</dt>
            <dd class="col-sm-9">@(Model.WaterLevel?.ToString("F2") ?? "N/A") feet</dd>

            <dt class="col-sm-3">Temperature:</dt>
            <dd class="col-sm-9">@(Model.Temperature?.ToString("F1") ?? "N/A") °C</dd>

            <dt class="col-sm-3">pH:</dt>
            <dd class="col-sm-9">@(Model.PH?.ToString("F2") ?? "N/A")</dd>
        </dl>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5 class="mb-0">Physical Parameters</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Conductivity:</dt>
            <dd class="col-sm-9">@(Model.Conductivity?.ToString("F2") ?? "N/A") μS/cm</dd>

            <dt class="col-sm-3">TDS:</dt>
            <dd class="col-sm-9">@(Model.TDS?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">Turbidity:</dt>
            <dd class="col-sm-9">@(Model.Turbidity?.ToString("F2") ?? "N/A") NTU</dd>
        </dl>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5 class="mb-0">Chemical Parameters</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">BOD5:</dt>
            <dd class="col-sm-9">@(Model.BOD5?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">COD:</dt>
            <dd class="col-sm-9">@(Model.COD?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">TSS:</dt>
            <dd class="col-sm-9">@(Model.TSS?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">NH3-N:</dt>
            <dd class="col-sm-9">@(Model.NH3N?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">NO3-N:</dt>
            <dd class="col-sm-9">@(Model.NO3N?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">TKN:</dt>
            <dd class="col-sm-9">@(Model.TKN?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">Total Phosphorus:</dt>
            <dd class="col-sm-9">@(Model.TotalPhosphorus?.ToString("F2") ?? "N/A") mg/L</dd>

            <dt class="col-sm-3">Chloride:</dt>
            <dd class="col-sm-9">@(Model.Chloride?.ToString("F2") ?? "N/A") mg/L</dd>
        </dl>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5 class="mb-0">Biological Parameters</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Fecal Coliform:</dt>
            <dd class="col-sm-9">@(Model.FecalColiform?.ToString("F0") ?? "N/A") CFU/100mL</dd>

            <dt class="col-sm-3">Total Coliform:</dt>
            <dd class="col-sm-9">@(Model.TotalColiform?.ToString("F0") ?? "N/A") CFU/100mL</dd>
        </dl>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5 class="mb-0">Lab Information</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Lab Certification:</dt>
            <dd class="col-sm-9">@(string.IsNullOrEmpty(Model.LabCertification) ? "N/A" : Model.LabCertification)</dd>

            <dt class="col-sm-3">Collected By:</dt>
            <dd class="col-sm-9">@(string.IsNullOrEmpty(Model.CollectedBy) ? "N/A" : Model.CollectedBy)</dd>

            <dt class="col-sm-3">Analyzed By:</dt>
            <dd class="col-sm-9">@(string.IsNullOrEmpty(Model.AnalyzedBy) ? "N/A" : Model.AnalyzedBy)</dd>
        </dl>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h5 class="mb-0">Additional Information</h5>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Comments:</dt>
            <dd class="col-sm-9">@(string.IsNullOrEmpty(Model.Comments) ? "N/A" : Model.Comments)</dd>
        </dl>
    </div>
</div>

