@model SAM.ViewModels.SystemAdmin.SystemAdminViewModel
@{
    ViewData["Title"] = "System Administration";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <p class="text-muted mb-0">Manage facilities, soils, crops, nozzles, sprayfields, and monitoring wells</p>
    </div>
</div>

<div class="system-admin-tabs mb-5">
    <div class="system-admin-tabs-container">
        <a class="system-admin-tab @(Model.ActiveTab == "facilities" ? "active" : "")" 
           asp-action="SystemAdmin" 
           asp-controller="SystemAdmin" 
           asp-route-tab="facilities" >
            <div class="system-admin-tab-icon">
                <i class="bi bi-building-fill"></i>
            </div>
            <div class="system-admin-tab-label">Facilities</div>
        </a>
        <a class="system-admin-tab @(Model.ActiveTab == "soils" ? "active" : "")" 
           asp-action="SystemAdmin" 
           asp-controller="SystemAdmin" 
           asp-route-tab="soils" >
            <div class="system-admin-tab-icon">
                <i class="bi bi-layers"></i>
            </div>
            <div class="system-admin-tab-label">Soil Types</div>
        </a>
        <a class="system-admin-tab @(Model.ActiveTab == "crops" ? "active" : "")" 
           asp-action="SystemAdmin" 
           asp-controller="SystemAdmin" 
           asp-route-tab="crops" >
            <div class="system-admin-tab-icon">
                <i class="bi bi-flower1"></i>
            </div>
            <div class="system-admin-tab-label">Crops</div>
        </a>
        <a class="system-admin-tab @(Model.ActiveTab == "nozzles" ? "active" : "")" 
           asp-action="SystemAdmin" 
           asp-controller="SystemAdmin" 
           asp-route-tab="nozzles" >
            <div class="system-admin-tab-icon">
                <i class="bi bi-droplet"></i>
            </div>
            <div class="system-admin-tab-label">Nozzles</div>
        </a>
        <a class="system-admin-tab @(Model.ActiveTab == "sprayfields" ? "active" : "")" 
           asp-action="SystemAdmin" 
           asp-controller="SystemAdmin" 
           asp-route-tab="sprayfields" >
            <div class="system-admin-tab-icon">
                <i class="bi bi-grid"></i>
            </div>
            <div class="system-admin-tab-label">Sprayfields</div>
        </a>
        <a class="system-admin-tab @(Model.ActiveTab == "monitoringwells" ? "active" : "")" 
           asp-action="SystemAdmin" 
           asp-controller="SystemAdmin" 
           asp-route-tab="monitoringwells" >
            <div class="system-admin-tab-icon">
                <i class="bi bi-water"></i>
            </div>
            <div class="system-admin-tab-label">Monitoring Wells</div>
        </a>
    </div>
</div>

<div>
    @switch (Model.ActiveTab)
    {
        case "facilities":
            @if (Model.Facilities != null)
            {
                var partialViewModel = new FacilitiesPartialViewModel
                {
                    Facilities = Model.Facilities,
                    Filter = Model.FacilitiesFilter,
                    IsGlobalAdmin = Model.IsGlobalAdmin,
                    Companies = Model.Companies,
                    SelectedCompanyId = Model.SelectedCompanyId
                };
                @await Html.PartialAsync("Partials/_FacilitiesPartial", partialViewModel)
            }
            break;
        case "soils":
            @if (Model.Soils != null)
            {
                var partialViewModel = new SoilsPartialViewModel
                {
                    Soils = Model.Soils,
                    Filter = Model.SoilsFilter,
                    IsGlobalAdmin = Model.IsGlobalAdmin,
                    Companies = Model.Companies,
                    SelectedCompanyId = Model.SelectedCompanyId
                };
                @await Html.PartialAsync("Partials/_SoilsPartial", partialViewModel)
            }
            break;
        case "crops":
            @if (Model.Crops != null)
            {
                var partialViewModel = new CropsPartialViewModel
                {
                    Crops = Model.Crops,
                    Filter = Model.CropsFilter,
                    IsGlobalAdmin = Model.IsGlobalAdmin,
                    Companies = Model.Companies,
                    SelectedCompanyId = Model.SelectedCompanyId
                };
                @await Html.PartialAsync("Partials/_CropsPartial", partialViewModel)
            }
            break;
        case "nozzles":
            @if (Model.Nozzles != null)
            {
                var partialViewModel = new NozzlesPartialViewModel
                {
                    Nozzles = Model.Nozzles,
                    Filter = Model.NozzlesFilter,
                    IsGlobalAdmin = Model.IsGlobalAdmin,
                    Companies = Model.Companies,
                    SelectedCompanyId = Model.SelectedCompanyId
                };
                @await Html.PartialAsync("Partials/_NozzlesPartial", partialViewModel)
            }
            break;
        case "sprayfields":
            @if (Model.Sprayfields != null)
            {
                var partialViewModel = new SprayfieldsPartialViewModel
                {
                    Sprayfields = Model.Sprayfields,
                    Filter = Model.SprayfieldsFilter,
                    IsGlobalAdmin = Model.IsGlobalAdmin,
                    Companies = Model.Companies,
                    SelectedCompanyId = Model.SelectedCompanyId
                };
                @await Html.PartialAsync("Partials/_SprayfieldsPartial", partialViewModel)
            }
            break;
        case "monitoringwells":
            @if (Model.MonitoringWells != null)
            {
                var partialViewModel = new MonitoringWellsPartialViewModel
                {
                    MonitoringWells = Model.MonitoringWells,
                    Filter = Model.MonitoringWellsFilter,
                    IsGlobalAdmin = Model.IsGlobalAdmin,
                    Companies = Model.Companies,
                    SelectedCompanyId = Model.SelectedCompanyId
                };
                @await Html.PartialAsync("Partials/_MonitoringWellsPartial", partialViewModel)
            }
            break;
    }
</div>


